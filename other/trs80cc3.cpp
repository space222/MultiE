#include <print>
#include <vector>
#include <iostream>
#include "trs80cc3.h"
extern u8 bios8x8[][8];

u8 trs80cc3::keyboard_state()
{
	auto keys = SDL_GetKeyboardState(nullptr);
	u8 val = 0xff;
	u8 rows = io[2]^0xff;
	if( rows & BIT(0) ) 
	{ 
		if( keys[SDL_SCANCODE_LSHIFT] && keys[SDL_SCANCODE_2] ) val &= ~BIT(0);
		if( keys[SDL_SCANCODE_H] ) val &= ~BIT(1);
		if( keys[SDL_SCANCODE_P] ) val &= ~BIT(2);
		if( keys[SDL_SCANCODE_X] ) val &= ~BIT(3);
		if( keys[SDL_SCANCODE_0] ) val &= ~BIT(4);
		if( keys[SDL_SCANCODE_8] ) val &= ~BIT(5);
		if( keys[SDL_SCANCODE_RETURN] ) val &= ~BIT(6);
	}
	if( rows & BIT(1) ) 
	{ 
		if( keys[SDL_SCANCODE_A] ) val &= ~BIT(0);
		if( keys[SDL_SCANCODE_I] ) val &= ~BIT(1);
		if( keys[SDL_SCANCODE_Q] ) val &= ~BIT(2);
		if( keys[SDL_SCANCODE_Y] ) val &= ~BIT(3);
		if( keys[SDL_SCANCODE_1] ) val &= ~BIT(4);
		if( keys[SDL_SCANCODE_9] ) val &= ~BIT(5);
		//if( keys[SDL_SCANCODE_N] ) val &= ~BIT(6); //clr?
	}
	if( rows & BIT(2) ) 
	{ 
		if( keys[SDL_SCANCODE_B] ) val &= ~BIT(0);
		if( keys[SDL_SCANCODE_J] ) val &= ~BIT(1);
		if( keys[SDL_SCANCODE_R] ) val &= ~BIT(2);
		if( keys[SDL_SCANCODE_Z] ) val &= ~BIT(3);
		if( keys[SDL_SCANCODE_2] ) val &= ~BIT(4);
		if( keys[SDL_SCANCODE_LSHIFT] && keys[SDL_SCANCODE_SEMICOLON] ) val &= ~BIT(5);
		if( keys[SDL_SCANCODE_ESCAPE] ) val &= ~BIT(6);
	}	
	if( rows & BIT(3) ) 
	{ 
		if( keys[SDL_SCANCODE_C] ) val &= ~BIT(0);
		if( keys[SDL_SCANCODE_K] ) val &= ~BIT(1);
		if( keys[SDL_SCANCODE_S] ) val &= ~BIT(2);
		if( keys[SDL_SCANCODE_UP] ) val &= ~BIT(3);
		if( keys[SDL_SCANCODE_3] ) val &= ~BIT(4);
		if( keys[SDL_SCANCODE_SEMICOLON] ) val &= ~BIT(5);
		if( keys[SDL_SCANCODE_LALT] ) val &= ~BIT(6);
	}
	if( rows & BIT(4) ) 
	{ 
		if( keys[SDL_SCANCODE_D] ) val &= ~BIT(0);
		if( keys[SDL_SCANCODE_L] ) val &= ~BIT(1);
		if( keys[SDL_SCANCODE_T] ) val &= ~BIT(2);
		if( keys[SDL_SCANCODE_DOWN] ) val &= ~BIT(3);
		if( keys[SDL_SCANCODE_4] ) val &= ~BIT(4);
		if( keys[SDL_SCANCODE_COMMA] ) val &= ~BIT(5);
		if( keys[SDL_SCANCODE_LCTRL] ) val &= ~BIT(6);
	}
	if( rows & BIT(5) ) 
	{ 
		if( keys[SDL_SCANCODE_E] ) val &= ~BIT(0);
		if( keys[SDL_SCANCODE_M] ) val &= ~BIT(1);
		if( keys[SDL_SCANCODE_U] ) val &= ~BIT(2);
		if( keys[SDL_SCANCODE_LEFT] ) val &= ~BIT(3);
		if( keys[SDL_SCANCODE_5] ) val &= ~BIT(4);
		if( keys[SDL_SCANCODE_EQUALS] ) val &= ~BIT(5);
		if( keys[SDL_SCANCODE_F1] ) val &= ~BIT(6);
	}
	if( rows & BIT(6) ) 
	{ 
		if( keys[SDL_SCANCODE_F] ) val &= ~BIT(0);
		if( keys[SDL_SCANCODE_N] ) val &= ~BIT(1);
		if( keys[SDL_SCANCODE_V] ) val &= ~BIT(2);
		if( keys[SDL_SCANCODE_RIGHT] ) val &= ~BIT(3);
		if( keys[SDL_SCANCODE_6] ) val &= ~BIT(4);
		if( keys[SDL_SCANCODE_PERIOD] ) val &= ~BIT(5);
		if( keys[SDL_SCANCODE_F2] ) val &= ~BIT(6);
	}
	if( rows & BIT(7) ) 
	{ 
		if( keys[SDL_SCANCODE_G] ) val &= ~BIT(0);
		if( keys[SDL_SCANCODE_O] ) val &= ~BIT(1);
		if( keys[SDL_SCANCODE_W] ) val &= ~BIT(2);
		if( keys[SDL_SCANCODE_SPACE] ) val &= ~BIT(3);
		if( keys[SDL_SCANCODE_7] ) val &= ~BIT(4);
		if( keys[SDL_SCANCODE_SLASH] ) val &= ~BIT(5);
		if( keys[SDL_SCANCODE_LSHIFT] ) val &= ~BIT(6);
	}
	return val;
}

u8 trs80cc3::read_io(u8 a)
{
	switch( a )
	{
	case 0x00: return keyboard_state();
//	case 0x02: return 0xff;
	
	default: break;
	}
	//std::println("${:X}: IO Rd ${:X}", cpu.pc, a);
	return io[a];
}

void trs80cc3::write_io(u8 a, u8 v)
{
	//std::println("${:X}: IO Wr ${:X} = ${:X}", cpu.pc, a, v);
	switch( a )
	{
	case 0xA0:
	case 0xA1:
	case 0xA2:
	case 0xA3:
	case 0xA4:
	case 0xA5:
	case 0xA6:
	case 0xA7:
	case 0xA8:
	case 0xA9:
	case 0xAA:
	case 0xAB:
	case 0xAC:
	case 0xAD:
	case 0xAE:
	case 0xAF:
		v &= 0x3F;
		if( v >= 0x3c )
		{// ??
			v &= ~3;
			v |= a&3;
		}
		io[a] = v;
		return;
	case 0xDE: rom_enabled = true; return;
	case 0xDF: rom_enabled = false; return;
	default: break;
	}
	io[a] = v;
}

#define MMU_ENABLED (io[0x90]&BIT(6))
#define RAM_VECTORS (io[0x90]&BIT(3))

u8 trs80cc3::read(u16 a)
{
	if( a >= 0xff00 ) return read_io(a&0xff);
	if( a >= 0xfe00 && (!MMU_ENABLED || RAM_VECTORS) ) return ram[0x7fe00 | (a&0xff)];
	u32 phys_index = (MMU_ENABLED ? io[0xA0 + (a>>13) + ((io[0x91]&1)<<4)] : (0x38+(a>>13)));
	u32 paddr = (phys_index<<13)|(a&0x1fff);
	if( rom_enabled && paddr >= 0x78000 && paddr < 0x7fe00 ) return bios[paddr&0x7fff];
	return ram[paddr];
}

void trs80cc3::write(u16 a, u8 v)
{
	if( a >= 0xff00 ) return write_io(a&0xff, v);
	if( a >= 0xfe00 && (!MMU_ENABLED || RAM_VECTORS) ) { ram[0x7fe00 | (a&0xff)] = v; return; }
	u32 phys_index = (MMU_ENABLED ? io[0xA0 + (a>>13) + ((io[0x91]&1)<<4)] : (0x38+(a>>13)));
	u32 paddr = (phys_index<<13)|(a&0x1fff);
	if( rom_enabled && paddr >= 0x78000 && paddr < 0x7fe00 ) { return; }
	ram[paddr] = v;
}

static u32 cc3pal[] = { 0, 0xff0000, 0x00ff00, 0x00ffff, 0xffff00, 0xf0f0f0, 0xf00f0f, 0x135846, 
		0xff, 0xff0880, 0x88ff00, 0x088fff, 0xff8fc, 0x20f6f0, 0xf0020f, 0x122840 };

void trs80cc3::run_frame()
{
	u64 target = last_target + 29833;
	while( stamp < target )
	{
		//if( cpu.pc >= 0xA000 && cpu.pc < 0xb000 ) { char a; std::cin >> a; }
		stamp += cpu.step();
	}
	last_target = target;
	
//	std::print("\033c");
	for(u32 y = 0; y < 16; ++y)
	{
		for(u32 x = 0; x < 32; ++x)
		{
			u8 ch = ram[0x70400 + (y*32) + x];
			if( ch >= 0x60 ) ch &= ~BIT(6);
			for(u32 Y = 0; Y < 8; ++Y)
			{
				for(u32 X = 0; X < 8; ++X)
				{
					u8 b = bios8x8[ch][Y];
					b >>= (X^7);
					b &= 1;
					fbuf[(y*8 + Y)*256 + (x*8 + X)] = b ? 0xff00ff : 0;
				}
			}
		}
	}
}

void trs80cc3::reset()
{
	cpu.reset( __builtin_bswap16(*(u16*)&bios[0x7ffe]) );
	cpu.reader = [&](u16 a)->u8 { return read(a); };
	cpu.writer = [&](u16 a, u8 v) { write(a,v); };
	memset(io, 0, 0x100);
	memset(ram, 0, 512_KB);
	for(u32 i = 0; i < 8; ++i) { io[0xA0+i] = io[0xA8+i] = 0x38 + i; }
}

bool trs80cc3::loadROM(std::string fname)
{
	if( !freadall(bios, fopen("./bios/trs80cc3.bios", "rb"), 32_KB) )
	{
		std::println("Need a TRS-80 CoCo3 BIOS");
		return false;
	}
	return true;
}

// yoinked from https://github.com/susam/pcface/blob/main/out/oldschool-bios-8x8/fontlist.js
u8 bios8x8[][8] = {
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // {] (0)
  {0x7e, 0x81, 0xa5, 0x81, 0xbd, 0x99, 0x81, 0x7e}, // {☺] (1)
  {0x7e, 0xff, 0xdb, 0xff, 0xc3, 0xe7, 0xff, 0x7e}, // {☻] (2)
  {0x6c, 0xfe, 0xfe, 0xfe, 0x7c, 0x38, 0x10, 0x00}, // {♥] (3)
  {0x10, 0x38, 0x7c, 0xfe, 0x7c, 0x38, 0x10, 0x00}, // {♦] (4)
  {0x38, 0x7c, 0x38, 0xfe, 0xfe, 0x7c, 0x38, 0x7c}, // {♣] (5)
  {0x10, 0x10, 0x38, 0x7c, 0xfe, 0x7c, 0x38, 0x7c}, // {♠] (6)
  {0x00, 0x00, 0x18, 0x3c, 0x3c, 0x18, 0x00, 0x00}, // {•] (7)
  {0xff, 0xff, 0xe7, 0xc3, 0xc3, 0xe7, 0xff, 0xff}, // {◘] (8)
  {0x00, 0x3c, 0x66, 0x42, 0x42, 0x66, 0x3c, 0x00}, // {○] (9)
  {0xff, 0xc3, 0x99, 0xbd, 0xbd, 0x99, 0xc3, 0xff}, // {◙] (10)
  {0x0f, 0x07, 0x0f, 0x7d, 0xcc, 0xcc, 0xcc, 0x78}, // {♂] (11)
  {0x3c, 0x66, 0x66, 0x66, 0x3c, 0x18, 0x7e, 0x18}, // {♀] (12)
  {0x3f, 0x33, 0x3f, 0x30, 0x30, 0x70, 0xf0, 0xe0}, // {♪] (13)
  {0x7f, 0x63, 0x7f, 0x63, 0x63, 0x67, 0xe6, 0xc0}, // {♫] (14)
  {0x99, 0x5a, 0x3c, 0xe7, 0xe7, 0x3c, 0x5a, 0x99}, // {☼] (15)
  {0x80, 0xe0, 0xf8, 0xfe, 0xf8, 0xe0, 0x80, 0x00}, // {►] (16)
  {0x02, 0x0e, 0x3e, 0xfe, 0x3e, 0x0e, 0x02, 0x00}, // {◄] (17)
  {0x18, 0x3c, 0x7e, 0x18, 0x18, 0x7e, 0x3c, 0x18}, // {↕] (18)
  {0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x66, 0x00}, // {‼] (19)
  {0x7f, 0xdb, 0xdb, 0x7b, 0x1b, 0x1b, 0x1b, 0x00}, // {¶] (20)
  {0x3e, 0x63, 0x38, 0x6c, 0x6c, 0x38, 0xcc, 0x78}, // {§] (21)
  {0x00, 0x00, 0x00, 0x00, 0x7e, 0x7e, 0x7e, 0x00}, // {▬] (22)
  {0x18, 0x3c, 0x7e, 0x18, 0x7e, 0x3c, 0x18, 0xff}, // {↨] (23)
  {0x18, 0x3c, 0x7e, 0x18, 0x18, 0x18, 0x18, 0x00}, // {↑] (24)
  {0x18, 0x18, 0x18, 0x18, 0x7e, 0x3c, 0x18, 0x00}, // {↓] (25)
  {0x00, 0x18, 0x0c, 0xfe, 0x0c, 0x18, 0x00, 0x00}, // {→] (26)
  {0x00, 0x30, 0x60, 0xfe, 0x60, 0x30, 0x00, 0x00}, // {←] (27)
  {0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xfe, 0x00, 0x00}, // {∟] (28)
  {0x00, 0x24, 0x66, 0xff, 0x66, 0x24, 0x00, 0x00}, // {↔] (29)
  {0x00, 0x18, 0x3c, 0x7e, 0xff, 0xff, 0x00, 0x00}, // {▲] (30)
  {0x00, 0xff, 0xff, 0x7e, 0x3c, 0x18, 0x00, 0x00}, // {▼] (31)
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // { ] (32)
  {0x30, 0x78, 0x78, 0x30, 0x30, 0x00, 0x30, 0x00}, // {!] (33)
  {0x6c, 0x6c, 0x6c, 0x00, 0x00, 0x00, 0x00, 0x00}, // {"] (34)
  {0x6c, 0x6c, 0xfe, 0x6c, 0xfe, 0x6c, 0x6c, 0x00}, // {#] (35)
  {0x30, 0x7c, 0xc0, 0x78, 0x0c, 0xf8, 0x30, 0x00}, // {$] (36)
  {0x00, 0xc6, 0xcc, 0x18, 0x30, 0x66, 0xc6, 0x00}, // {%] (37)
  {0x38, 0x6c, 0x38, 0x76, 0xdc, 0xcc, 0x76, 0x00}, // {&] (38)
  {0x60, 0x60, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00}, // {'] (39)
  {0x18, 0x30, 0x60, 0x60, 0x60, 0x30, 0x18, 0x00}, // {(] (40)
  {0x60, 0x30, 0x18, 0x18, 0x18, 0x30, 0x60, 0x00}, // {)] (41)
  {0x00, 0x66, 0x3c, 0xff, 0x3c, 0x66, 0x00, 0x00}, // {*] (42)
  {0x00, 0x30, 0x30, 0xfc, 0x30, 0x30, 0x00, 0x00}, // {+] (43)
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x60}, // {,] (44)
  {0x00, 0x00, 0x00, 0xfc, 0x00, 0x00, 0x00, 0x00}, // {-] (45)
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00}, // {.] (46)
  {0x06, 0x0c, 0x18, 0x30, 0x60, 0xc0, 0x80, 0x00}, // {/] (47)
  {0x7c, 0xc6, 0xce, 0xde, 0xf6, 0xe6, 0x7c, 0x00}, // {0] (48)
  {0x30, 0x70, 0x30, 0x30, 0x30, 0x30, 0xfc, 0x00}, // {1] (49)
  {0x78, 0xcc, 0x0c, 0x38, 0x60, 0xcc, 0xfc, 0x00}, // {2] (50)
  {0x78, 0xcc, 0x0c, 0x38, 0x0c, 0xcc, 0x78, 0x00}, // {3] (51)
  {0x1c, 0x3c, 0x6c, 0xcc, 0xfe, 0x0c, 0x1e, 0x00}, // {4] (52)
  {0xfc, 0xc0, 0xf8, 0x0c, 0x0c, 0xcc, 0x78, 0x00}, // {5] (53)
  {0x38, 0x60, 0xc0, 0xf8, 0xcc, 0xcc, 0x78, 0x00}, // {6] (54)
  {0xfc, 0xcc, 0x0c, 0x18, 0x30, 0x30, 0x30, 0x00}, // {7] (55)
  {0x78, 0xcc, 0xcc, 0x78, 0xcc, 0xcc, 0x78, 0x00}, // {8] (56)
  {0x78, 0xcc, 0xcc, 0x7c, 0x0c, 0x18, 0x70, 0x00}, // {9] (57)
  {0x00, 0x30, 0x30, 0x00, 0x00, 0x30, 0x30, 0x00}, // {:] (58)
  {0x00, 0x30, 0x30, 0x00, 0x00, 0x30, 0x30, 0x60}, // {;] (59)
  {0x18, 0x30, 0x60, 0xc0, 0x60, 0x30, 0x18, 0x00}, // {<] (60)
  {0x00, 0x00, 0xfc, 0x00, 0x00, 0xfc, 0x00, 0x00}, // {=] (61)
  {0x60, 0x30, 0x18, 0x0c, 0x18, 0x30, 0x60, 0x00}, // {>] (62)
  {0x78, 0xcc, 0x0c, 0x18, 0x30, 0x00, 0x30, 0x00}, // {?] (63)
  {0x7c, 0xc6, 0xde, 0xde, 0xde, 0xc0, 0x78, 0x00}, // {@] (64)
  {0x30, 0x78, 0xcc, 0xcc, 0xfc, 0xcc, 0xcc, 0x00}, // {A] (65)
  {0xfc, 0x66, 0x66, 0x7c, 0x66, 0x66, 0xfc, 0x00}, // {B] (66)
  {0x3c, 0x66, 0xc0, 0xc0, 0xc0, 0x66, 0x3c, 0x00}, // {C] (67)
  {0xf8, 0x6c, 0x66, 0x66, 0x66, 0x6c, 0xf8, 0x00}, // {D] (68)
  {0xfe, 0x62, 0x68, 0x78, 0x68, 0x62, 0xfe, 0x00}, // {E] (69)
  {0xfe, 0x62, 0x68, 0x78, 0x68, 0x60, 0xf0, 0x00}, // {F] (70)
  {0x3c, 0x66, 0xc0, 0xc0, 0xce, 0x66, 0x3e, 0x00}, // {G] (71)
  {0xcc, 0xcc, 0xcc, 0xfc, 0xcc, 0xcc, 0xcc, 0x00}, // {H] (72)
  {0x78, 0x30, 0x30, 0x30, 0x30, 0x30, 0x78, 0x00}, // {I] (73)
  {0x1e, 0x0c, 0x0c, 0x0c, 0xcc, 0xcc, 0x78, 0x00}, // {J] (74)
  {0xe6, 0x66, 0x6c, 0x78, 0x6c, 0x66, 0xe6, 0x00}, // {K] (75)
  {0xf0, 0x60, 0x60, 0x60, 0x62, 0x66, 0xfe, 0x00}, // {L] (76)
  {0xc6, 0xee, 0xfe, 0xfe, 0xd6, 0xc6, 0xc6, 0x00}, // {M] (77)
  {0xc6, 0xe6, 0xf6, 0xde, 0xce, 0xc6, 0xc6, 0x00}, // {N] (78)
  {0x38, 0x6c, 0xc6, 0xc6, 0xc6, 0x6c, 0x38, 0x00}, // {O] (79)
  {0xfc, 0x66, 0x66, 0x7c, 0x60, 0x60, 0xf0, 0x00}, // {P] (80)
  {0x78, 0xcc, 0xcc, 0xcc, 0xdc, 0x78, 0x1c, 0x00}, // {Q] (81)
  {0xfc, 0x66, 0x66, 0x7c, 0x6c, 0x66, 0xe6, 0x00}, // {R] (82)
  {0x78, 0xcc, 0xe0, 0x70, 0x1c, 0xcc, 0x78, 0x00}, // {S] (83)
  {0xfc, 0xb4, 0x30, 0x30, 0x30, 0x30, 0x78, 0x00}, // {T] (84)
  {0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0xfc, 0x00}, // {U] (85)
  {0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x78, 0x30, 0x00}, // {V] (86)
  {0xc6, 0xc6, 0xc6, 0xd6, 0xfe, 0xee, 0xc6, 0x00}, // {W] (87)
  {0xc6, 0xc6, 0x6c, 0x38, 0x38, 0x6c, 0xc6, 0x00}, // {X] (88)
  {0xcc, 0xcc, 0xcc, 0x78, 0x30, 0x30, 0x78, 0x00}, // {Y] (89)
  {0xfe, 0xc6, 0x8c, 0x18, 0x32, 0x66, 0xfe, 0x00}, // {Z] (90)
  {0x78, 0x60, 0x60, 0x60, 0x60, 0x60, 0x78, 0x00}, // {{] (91)
  {0xc0, 0x60, 0x30, 0x18, 0x0c, 0x06, 0x02, 0x00}, // {\] (92)
  {0x78, 0x18, 0x18, 0x18, 0x18, 0x18, 0x78, 0x00}, // {]] (93)
  {0x10, 0x38, 0x6c, 0xc6, 0x00, 0x00, 0x00, 0x00}, // {^] (94)
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff}, // {_] (95)
  {0x30, 0x30, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00}, // {`] (96)
  {0x00, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0x76, 0x00}, // {a] (97)
  {0xe0, 0x60, 0x60, 0x7c, 0x66, 0x66, 0xdc, 0x00}, // {b] (98)
  {0x00, 0x00, 0x78, 0xcc, 0xc0, 0xcc, 0x78, 0x00}, // {c] (99)
  {0x1c, 0x0c, 0x0c, 0x7c, 0xcc, 0xcc, 0x76, 0x00}, // {d] (100)
  {0x00, 0x00, 0x78, 0xcc, 0xfc, 0xc0, 0x78, 0x00}, // {e] (101)
  {0x38, 0x6c, 0x60, 0xf0, 0x60, 0x60, 0xf0, 0x00}, // {f] (102)
  {0x00, 0x00, 0x76, 0xcc, 0xcc, 0x7c, 0x0c, 0xf8}, // {g] (103)
  {0xe0, 0x60, 0x6c, 0x76, 0x66, 0x66, 0xe6, 0x00}, // {h] (104)
  {0x30, 0x00, 0x70, 0x30, 0x30, 0x30, 0x78, 0x00}, // {i] (105)
  {0x0c, 0x00, 0x0c, 0x0c, 0x0c, 0xcc, 0xcc, 0x78}, // {j] (106)
  {0xe0, 0x60, 0x66, 0x6c, 0x78, 0x6c, 0xe6, 0x00}, // {k] (107)
  {0x70, 0x30, 0x30, 0x30, 0x30, 0x30, 0x78, 0x00}, // {l] (108)
  {0x00, 0x00, 0xcc, 0xfe, 0xfe, 0xd6, 0xc6, 0x00}, // {m] (109)
  {0x00, 0x00, 0xf8, 0xcc, 0xcc, 0xcc, 0xcc, 0x00}, // {n] (110)
  {0x00, 0x00, 0x78, 0xcc, 0xcc, 0xcc, 0x78, 0x00}, // {o] (111)
  {0x00, 0x00, 0xdc, 0x66, 0x66, 0x7c, 0x60, 0xf0}, // {p] (112)
  {0x00, 0x00, 0x76, 0xcc, 0xcc, 0x7c, 0x0c, 0x1e}, // {q] (113)
  {0x00, 0x00, 0xdc, 0x76, 0x66, 0x60, 0xf0, 0x00}, // {r] (114)
  {0x00, 0x00, 0x7c, 0xc0, 0x78, 0x0c, 0xf8, 0x00}, // {s] (115)
  {0x10, 0x30, 0x7c, 0x30, 0x30, 0x34, 0x18, 0x00}, // {t] (116)
  {0x00, 0x00, 0xcc, 0xcc, 0xcc, 0xcc, 0x76, 0x00}, // {u] (117)
  {0x00, 0x00, 0xcc, 0xcc, 0xcc, 0x78, 0x30, 0x00}, // {v] (118)
  {0x00, 0x00, 0xc6, 0xd6, 0xfe, 0xfe, 0x6c, 0x00}, // {w] (119)
  {0x00, 0x00, 0xc6, 0x6c, 0x38, 0x6c, 0xc6, 0x00}, // {x] (120)
  {0x00, 0x00, 0xcc, 0xcc, 0xcc, 0x7c, 0x0c, 0xf8}, // {y] (121)
  {0x00, 0x00, 0xfc, 0x98, 0x30, 0x64, 0xfc, 0x00}, // {z] (122)
  {0x1c, 0x30, 0x30, 0xe0, 0x30, 0x30, 0x1c, 0x00}, // {{] (123)
  {0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x00}, // {|] (124)
  {0xe0, 0x30, 0x30, 0x1c, 0x30, 0x30, 0xe0, 0x00}, // {}] (125)
  {0x76, 0xdc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // {~] (126)
  {0x00, 0x10, 0x38, 0x6c, 0xc6, 0xc6, 0xfe, 0x00}, // {⌂] (127)
  {0x78, 0xcc, 0xc0, 0xcc, 0x78, 0x18, 0x0c, 0x78}, // {Ç] (128)
  {0x00, 0xcc, 0x00, 0xcc, 0xcc, 0xcc, 0x7e, 0x00}, // {ü] (129)
  {0x1c, 0x00, 0x78, 0xcc, 0xfc, 0xc0, 0x78, 0x00}, // {é] (130)
  {0x7e, 0xc3, 0x3c, 0x06, 0x3e, 0x66, 0x3f, 0x00}, // {â] (131)
  {0xcc, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0x7e, 0x00}, // {ä] (132)
  {0xe0, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0x7e, 0x00}, // {à] (133)
  {0x30, 0x30, 0x78, 0x0c, 0x7c, 0xcc, 0x7e, 0x00}, // {å] (134)
  {0x00, 0x00, 0x78, 0xc0, 0xc0, 0x78, 0x0c, 0x38}, // {ç] (135)
  {0x7e, 0xc3, 0x3c, 0x66, 0x7e, 0x60, 0x3c, 0x00}, // {ê] (136)
  {0xcc, 0x00, 0x78, 0xcc, 0xfc, 0xc0, 0x78, 0x00}, // {ë] (137)
  {0xe0, 0x00, 0x78, 0xcc, 0xfc, 0xc0, 0x78, 0x00}, // {è] (138)
  {0xcc, 0x00, 0x70, 0x30, 0x30, 0x30, 0x78, 0x00}, // {ï] (139)
  {0x7c, 0xc6, 0x38, 0x18, 0x18, 0x18, 0x3c, 0x00}, // {î] (140)
  {0xe0, 0x00, 0x70, 0x30, 0x30, 0x30, 0x78, 0x00}, // {ì] (141)
  {0xc6, 0x38, 0x6c, 0xc6, 0xfe, 0xc6, 0xc6, 0x00}, // {Ä] (142)
  {0x30, 0x30, 0x00, 0x78, 0xcc, 0xfc, 0xcc, 0x00}, // {Å] (143)
  {0x1c, 0x00, 0xfc, 0x60, 0x78, 0x60, 0xfc, 0x00}, // {É] (144)
  {0x00, 0x00, 0x7f, 0x0c, 0x7f, 0xcc, 0x7f, 0x00}, // {æ] (145)
  {0x3e, 0x6c, 0xcc, 0xfe, 0xcc, 0xcc, 0xce, 0x00}, // {Æ] (146)
  {0x78, 0xcc, 0x00, 0x78, 0xcc, 0xcc, 0x78, 0x00}, // {ô] (147)
  {0x00, 0xcc, 0x00, 0x78, 0xcc, 0xcc, 0x78, 0x00}, // {ö] (148)
  {0x00, 0xe0, 0x00, 0x78, 0xcc, 0xcc, 0x78, 0x00}, // {ò] (149)
  {0x78, 0xcc, 0x00, 0xcc, 0xcc, 0xcc, 0x7e, 0x00}, // {û] (150)
  {0x00, 0xe0, 0x00, 0xcc, 0xcc, 0xcc, 0x7e, 0x00}, // {ù] (151)
  {0x00, 0xcc, 0x00, 0xcc, 0xcc, 0x7c, 0x0c, 0xf8}, // {ÿ] (152)
  {0xc3, 0x18, 0x3c, 0x66, 0x66, 0x3c, 0x18, 0x00}, // {Ö] (153)
  {0xcc, 0x00, 0xcc, 0xcc, 0xcc, 0xcc, 0x78, 0x00}, // {Ü] (154)
  {0x18, 0x18, 0x7e, 0xc0, 0xc0, 0x7e, 0x18, 0x18}, // {¢] (155)
  {0x38, 0x6c, 0x64, 0xf0, 0x60, 0xe6, 0xfc, 0x00}, // {£] (156)
  {0xcc, 0xcc, 0x78, 0xfc, 0x30, 0xfc, 0x30, 0x30}, // {¥] (157)
  {0xf8, 0xcc, 0xcc, 0xfa, 0xc6, 0xcf, 0xc6, 0xc7}, // {₧] (158)
  {0x0e, 0x1b, 0x18, 0x3c, 0x18, 0x18, 0xd8, 0x70}, // {ƒ] (159)
  {0x1c, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0x7e, 0x00}, // {á] (160)
  {0x38, 0x00, 0x70, 0x30, 0x30, 0x30, 0x78, 0x00}, // {í] (161)
  {0x00, 0x1c, 0x00, 0x78, 0xcc, 0xcc, 0x78, 0x00}, // {ó] (162)
  {0x00, 0x1c, 0x00, 0xcc, 0xcc, 0xcc, 0x7e, 0x00}, // {ú] (163)
  {0x00, 0xf8, 0x00, 0xf8, 0xcc, 0xcc, 0xcc, 0x00}, // {ñ] (164)
  {0xfc, 0x00, 0xcc, 0xec, 0xfc, 0xdc, 0xcc, 0x00}, // {Ñ] (165)
  {0x3c, 0x6c, 0x6c, 0x3e, 0x00, 0x7e, 0x00, 0x00}, // {ª] (166)
  {0x38, 0x6c, 0x6c, 0x38, 0x00, 0x7c, 0x00, 0x00}, // {º] (167)
  {0x30, 0x00, 0x30, 0x60, 0xc0, 0xcc, 0x78, 0x00}, // {¿] (168)
  {0x00, 0x00, 0x00, 0xfc, 0xc0, 0xc0, 0x00, 0x00}, // {⌐] (169)
  {0x00, 0x00, 0x00, 0xfc, 0x0c, 0x0c, 0x00, 0x00}, // {¬] (170)
  {0xc3, 0xc6, 0xcc, 0xde, 0x33, 0x66, 0xcc, 0x0f}, // {½] (171)
  {0xc3, 0xc6, 0xcc, 0xdb, 0x37, 0x6f, 0xcf, 0x03}, // {¼] (172)
  {0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x18, 0x00}, // {¡] (173)
  {0x00, 0x33, 0x66, 0xcc, 0x66, 0x33, 0x00, 0x00}, // {«] (174)
  {0x00, 0xcc, 0x66, 0x33, 0x66, 0xcc, 0x00, 0x00}, // {»] (175)
  {0x22, 0x88, 0x22, 0x88, 0x22, 0x88, 0x22, 0x88}, // {░] (176)
  {0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa}, // {▒] (177)
  {0xdb, 0x77, 0xdb, 0xee, 0xdb, 0x77, 0xdb, 0xee}, // {▓] (178)
  {0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18}, // {│] (179)
  {0x18, 0x18, 0x18, 0x18, 0xf8, 0x18, 0x18, 0x18}, // {┤] (180)
  {0x18, 0x18, 0xf8, 0x18, 0xf8, 0x18, 0x18, 0x18}, // {╡] (181)
  {0x36, 0x36, 0x36, 0x36, 0xf6, 0x36, 0x36, 0x36}, // {╢] (182)
  {0x00, 0x00, 0x00, 0x00, 0xfe, 0x36, 0x36, 0x36}, // {╖] (183)
  {0x00, 0x00, 0xf8, 0x18, 0xf8, 0x18, 0x18, 0x18}, // {╕] (184)
  {0x36, 0x36, 0xf6, 0x06, 0xf6, 0x36, 0x36, 0x36}, // {╣] (185)
  {0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36}, // {║] (186)
  {0x00, 0x00, 0xfe, 0x06, 0xf6, 0x36, 0x36, 0x36}, // {╗] (187)
  {0x36, 0x36, 0xf6, 0x06, 0xfe, 0x00, 0x00, 0x00}, // {╝] (188)
  {0x36, 0x36, 0x36, 0x36, 0xfe, 0x00, 0x00, 0x00}, // {╜] (189)
  {0x18, 0x18, 0xf8, 0x18, 0xf8, 0x00, 0x00, 0x00}, // {╛] (190)
  {0x00, 0x00, 0x00, 0x00, 0xf8, 0x18, 0x18, 0x18}, // {┐] (191)
  {0x18, 0x18, 0x18, 0x18, 0x1f, 0x00, 0x00, 0x00}, // {└] (192)
  {0x18, 0x18, 0x18, 0x18, 0xff, 0x00, 0x00, 0x00}, // {┴] (193)
  {0x00, 0x00, 0x00, 0x00, 0xff, 0x18, 0x18, 0x18}, // {┬] (194)
  {0x18, 0x18, 0x18, 0x18, 0x1f, 0x18, 0x18, 0x18}, // {├] (195)
  {0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00}, // {─] (196)
  {0x18, 0x18, 0x18, 0x18, 0xff, 0x18, 0x18, 0x18}, // {┼] (197)
  {0x18, 0x18, 0x1f, 0x18, 0x1f, 0x18, 0x18, 0x18}, // {╞] (198)
  {0x36, 0x36, 0x36, 0x36, 0x37, 0x36, 0x36, 0x36}, // {╟] (199)
  {0x36, 0x36, 0x37, 0x30, 0x3f, 0x00, 0x00, 0x00}, // {╚] (200)
  {0x00, 0x00, 0x3f, 0x30, 0x37, 0x36, 0x36, 0x36}, // {╔] (201)
  {0x36, 0x36, 0xf7, 0x00, 0xff, 0x00, 0x00, 0x00}, // {╩] (202)
  {0x00, 0x00, 0xff, 0x00, 0xf7, 0x36, 0x36, 0x36}, // {╦] (203)
  {0x36, 0x36, 0x37, 0x30, 0x37, 0x36, 0x36, 0x36}, // {╠] (204)
  {0x00, 0x00, 0xff, 0x00, 0xff, 0x00, 0x00, 0x00}, // {═] (205)
  {0x36, 0x36, 0xf7, 0x00, 0xf7, 0x36, 0x36, 0x36}, // {╬] (206)
  {0x18, 0x18, 0xff, 0x00, 0xff, 0x00, 0x00, 0x00}, // {╧] (207)
  {0x36, 0x36, 0x36, 0x36, 0xff, 0x00, 0x00, 0x00}, // {╨] (208)
  {0x00, 0x00, 0xff, 0x00, 0xff, 0x18, 0x18, 0x18}, // {╤] (209)
  {0x00, 0x00, 0x00, 0x00, 0xff, 0x36, 0x36, 0x36}, // {╥] (210)
  {0x36, 0x36, 0x36, 0x36, 0x3f, 0x00, 0x00, 0x00}, // {╙] (211)
  {0x18, 0x18, 0x1f, 0x18, 0x1f, 0x00, 0x00, 0x00}, // {╘] (212)
  {0x00, 0x00, 0x1f, 0x18, 0x1f, 0x18, 0x18, 0x18}, // {╒] (213)
  {0x00, 0x00, 0x00, 0x00, 0x3f, 0x36, 0x36, 0x36}, // {╓] (214)
  {0x36, 0x36, 0x36, 0x36, 0xff, 0x36, 0x36, 0x36}, // {╫] (215)
  {0x18, 0x18, 0xff, 0x18, 0xff, 0x18, 0x18, 0x18}, // {╪] (216)
  {0x18, 0x18, 0x18, 0x18, 0xf8, 0x00, 0x00, 0x00}, // {┘] (217)
  {0x00, 0x00, 0x00, 0x00, 0x1f, 0x18, 0x18, 0x18}, // {┌] (218)
  {0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff}, // {█] (219)
  {0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff}, // {▄] (220)
  {0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0}, // {▌] (221)
  {0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f}, // {▐] (222)
  {0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00}, // {▀] (223)
  {0x00, 0x00, 0x76, 0xdc, 0xc8, 0xdc, 0x76, 0x00}, // {α] (224)
  {0x00, 0x78, 0xcc, 0xf8, 0xcc, 0xf8, 0xc0, 0xc0}, // {ß] (225)
  {0x00, 0xfc, 0xcc, 0xc0, 0xc0, 0xc0, 0xc0, 0x00}, // {Γ] (226)
  {0x00, 0xfe, 0x6c, 0x6c, 0x6c, 0x6c, 0x6c, 0x00}, // {π] (227)
  {0xfc, 0xcc, 0x60, 0x30, 0x60, 0xcc, 0xfc, 0x00}, // {Σ] (228)
  {0x00, 0x00, 0x7e, 0xd8, 0xd8, 0xd8, 0x70, 0x00}, // {σ] (229)
  {0x00, 0x66, 0x66, 0x66, 0x66, 0x7c, 0x60, 0xc0}, // {µ] (230)
  {0x00, 0x76, 0xdc, 0x18, 0x18, 0x18, 0x18, 0x00}, // {τ] (231)
  {0xfc, 0x30, 0x78, 0xcc, 0xcc, 0x78, 0x30, 0xfc}, // {Φ] (232)
  {0x38, 0x6c, 0xc6, 0xfe, 0xc6, 0x6c, 0x38, 0x00}, // {Θ] (233)
  {0x38, 0x6c, 0xc6, 0xc6, 0x6c, 0x6c, 0xee, 0x00}, // {Ω] (234)
  {0x1c, 0x30, 0x18, 0x7c, 0xcc, 0xcc, 0x78, 0x00}, // {δ] (235)
  {0x00, 0x00, 0x7e, 0xdb, 0xdb, 0x7e, 0x00, 0x00}, // {∞] (236)
  {0x06, 0x0c, 0x7e, 0xdb, 0xdb, 0x7e, 0x60, 0xc0}, // {φ] (237)
  {0x38, 0x60, 0xc0, 0xf8, 0xc0, 0x60, 0x38, 0x00}, // {ε] (238)
  {0x78, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x00}, // {∩] (239)
  {0x00, 0xfc, 0x00, 0xfc, 0x00, 0xfc, 0x00, 0x00}, // {≡] (240)
  {0x30, 0x30, 0xfc, 0x30, 0x30, 0x00, 0xfc, 0x00}, // {±] (241)
  {0x60, 0x30, 0x18, 0x30, 0x60, 0x00, 0xfc, 0x00}, // {≥] (242)
  {0x18, 0x30, 0x60, 0x30, 0x18, 0x00, 0xfc, 0x00}, // {≤] (243)
  {0x0e, 0x1b, 0x1b, 0x18, 0x18, 0x18, 0x18, 0x18}, // {⌠] (244)
  {0x18, 0x18, 0x18, 0x18, 0x18, 0xd8, 0xd8, 0x70}, // {⌡] (245)
  {0x30, 0x30, 0x00, 0xfc, 0x00, 0x30, 0x30, 0x00}, // {÷] (246)
  {0x00, 0x76, 0xdc, 0x00, 0x76, 0xdc, 0x00, 0x00}, // {≈] (247)
  {0x38, 0x6c, 0x6c, 0x38, 0x00, 0x00, 0x00, 0x00}, // {°] (248)
  {0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00}, // {∙] (249)
  {0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00}, // {·] (250)
  {0x0f, 0x0c, 0x0c, 0x0c, 0xec, 0x6c, 0x3c, 0x1c}, // {√] (251)
  {0x78, 0x6c, 0x6c, 0x6c, 0x6c, 0x00, 0x00, 0x00}, // {ⁿ] (252)
  {0x70, 0x18, 0x30, 0x60, 0x78, 0x00, 0x00, 0x00}, // {²] (253)
  {0x00, 0x00, 0x3c, 0x3c, 0x3c, 0x3c, 0x00, 0x00}, // {■] (254)
  {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00} // { ] (255)
};


